<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!--
        Blog blog views
    -->
    <record id="blog_blog_view_form" model="ir.ui.view">
        <field name="name">blog.blog.form</field>
        <field name="model">blog.blog</field>
        <field name="inherit_id" ref="website_blog.view_blog_blog_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='website_id']" position="after">
                <field name="user_ids" widget="many2many_tags"/>
            </xpath>
        </field>
    </record>

    <!--
        Blog post views
    -->
    <record id="blog_post_view_form" model="ir.ui.view">
        <field name="name">blog.post.form</field>
        <field name="model">blog.post</field>
        <field name="inherit_id" ref="website_blog.view_blog_post_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='ranking']" position="after">
                <field name="can_read"/>
                <field name="can_edit"/>
                <field name="can_delete"/>
            </xpath>
            <xpath expr="//group[last()]" position="after">
                <notebook>
                    <page name="content" string="Content">
                        <group name="content_edition">
                            <field name="content" nolabel="1" widget="html_frame" options="{'editor_url': '/website_blog/field/content'}"/>
                        </group>
                    </page>
                </notebook>
            </xpath>
        </field>
    </record>

    <record id="blog_post_view_search" model="ir.ui.view">
        <field name="name">blog.post.search</field>
        <field name="model">blog.post</field>
        <field name="inherit_id" ref="website_blog.view_blog_post_search"/>
        <field name="arch" type="xml">
            <xpath expr="//filter[@name='inactive']" position="before">
                <filter string="My Posts" name="my_posts" domain="[('am_i_author','=', True)]"/>
                <filter string="Posts of My Blogs" name="posts_of_my_blogs" domain="[('blog_id.user_ids','=', uid)]"/>
                <separator/>
                <filter string="Published" name="publisehd" domain="[('website_published','=', True)]"/>
                <filter string="Unublished" name="unpublisehd" domain="[('website_published','=', False)]"/>
                <separator/>
            </xpath>
        </field>
    </record>

    <!--
        Actions and menus
    -->
    <record id="website_blog.action_blog_post" model="ir.actions.act_window">
        <field name="context">{
            'search_default_my_posts': 1
        }</field>
    </record>

    <record id="website_blog.menu_website_blog_root" model="ir.ui.menu">
        <field name="groups_id" eval="[(4, ref('group_website_blog_publisher_own'))]"/>
    </record>

</odoo>
