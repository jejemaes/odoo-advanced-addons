<?xml version="1.0" encoding="UTF-8"?>
<odoo>

    <record id="rental_add_product_view_form" model="ir.ui.view">
        <field name="name">rental.add.product.view.form</field>
        <field name="model">rental.add.product</field>
        <field name="arch" type="xml">
            <form string="Add Rental Product">
                <field name="sale_order_id" invisible="1"/>
                <field name="product_rental_tracking" invisible="1"/>
                <field name="product_rental_min_duration" invisible="1"/>
                <group>
                    <group>
                        <field name="product_id"/>

                        <field name="datetime_from" invisible="1"/>
                        <field name="datetime_to" invisible="1"/>

                        <label for="display_date_from" string="Dates" attrs="{'invisible': [('product_rental_min_duration', 'in', ['minute', 'hour'])]}"/>
                        <div class="o_row" attrs="{'invisible': [('product_rental_min_duration', 'in', ['minute', 'hour'])]}">
                            <field name="display_date_from" class="oe_inline" attrs="{'required': [('product_rental_min_duration', 'not in', ['minute', 'hour'])]}"/>
                            <span class="o_form_label">To</span>
                            <field name="display_date_to" class="oe_inline" attrs="{'required': [('product_rental_min_duration', 'not in', ['minute', 'hour'])]}"/>
                        </div>
                        <label for="product_rental_timezone" string="" attrs="{'invisible': [('product_rental_timezone', '=', False)]}"/>
                        <div class="o_row" attrs="{'invisible': [('product_rental_timezone', '=', False)]}">
                            <p class="text-muted">
                                Chosen dates are considered in <field name="product_rental_timezone" class="oe_inline font-weight-bold" nolabel="1"/> timezone.
                            </p>
                        </div>
                        <!-- <label for="datetime_from" string="Dates" attrs="{'invisible': [('product_rental_min_duration', 'in', ['day', 'week', 'month', 'year'])]}"/>
                        <div class="o_row" attrs="{'invisible': [('product_rental_min_duration', 'in', ['day', 'week', 'month', 'year'])]}">
                            <field name="datetime_from" class="oe_inline"/>
                            <span class="o_form_label">To</span>
                            <field name="datetime_to" class="oe_inline"/>
                        </div> -->
                        <field name="date_warning" class="text-warning" string="" attrs="{'invisible': [('date_warning', '=', False)]}"/>

                        <label for="product_qty" string="Quantity" attrs="{'invisible': [('product_rental_tracking', '=', 'use_resource')]}"/>
                        <div class="o_row" attrs="{'invisible': [('product_rental_tracking', '=', 'use_resource')]}">
                            <field name="product_qty" class="oe_inline"/>
                            <field name="product_uom_id" class="oe_inline"/>
                        </div>
                    </group>
                    <group>
                        <label for="price_unit"/>
                        <div>
                            <field name="price_unit"/>
                            <field name="currency_id" invisible="1"/>
                        </div>
                        <field name="pricing_explanation" class="text-muted" string=""/>
                    </group>
                </group>
                <group attrs="{'invisible': [('product_rental_tracking', '!=', 'use_resource')], 'required': [('product_rental_tracking', '!=', 'use_resource')]}">
                    <field name="resource_ids" widget="many2many_tags" options="{'no_create_edit': True}"/>
                    <field name="resource_warning" class="text-danger" string="" attrs="{'invisible': [('resource_warning', '=', False)]}"/>
                    <field name="resource_count" class="oe_inline" string="Quantity"/>
                </group>
                <footer>
                    <button string="Add Rental Line" type="object" name="action_add_line" class="oe_highlight" attrs="{'invisible': [('resource_warning', '!=', False)]}"/>
                    <button string="Add Rental Line" type="object" name="action_add_line" class="oe_highlight" confirm="Are you sure you want to add this rental line since some resources are not available during selected period ? This will create conflicts in resource's calendar." attrs="{'invisible': [('resource_warning', '=', False)]}"/>
                    <button string="Cancel" special="cancel" type="object" class="btn btn-secondary oe_inline"/>
                </footer>
            </form>
        </field>
    </record>

</odoo>
