<?xml version="1.0"?>
<odoo>

    <template id="event_details" name="Event Header" inherit_id="website_event.event_details">
        <xpath expr="//t[@t-call='website_event.registration_template']" position="attributes">
            <attribute name="t-if">event.use_registration</attribute>
        </xpath>
    </template>

    <!--
    	Limit "registrable" seats during a reservation
	-->
	<template id="registration_template" inherit_id="website_event.registration_template">
		<xpath expr="//div[@id='o_wevent_tickets_collapse']//t[@t-set='seats_max']" position="after">
			<t t-if="ticket.seats_registration_limit">
				<t t-set="seats_max" t-value="min(seats_max, ticket.seats_registration_limit + 1)"/>
			</t>
		</xpath>
		<xpath expr="//div[hasclass('o_wevent_registration_single')]//t[@t-set='seats_max']" position="after">
			<t t-if="tickets.seats_registration_limit">
				<t t-set="seats_max" t-value="min(seats_max, tickets.seats_registration_limit + 1)"/>
			</t>
		</xpath>
	</template>

</odoo>
